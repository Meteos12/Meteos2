<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>シール業務ツール</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#111;
  color:#fff;
}

header{
  padding:16px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  background:#000;
}

.tabs{
  display:flex;
}

.tab{
  flex:1;
  padding:14px;
  text-align:center;
  cursor:pointer;
  background:#222;
}

.tab.active{
  background:#4CAF50;
}

.container{
  padding:16px;
  max-width:500px;
  margin:auto;
}

.card{
  background:#1e1e1e;
  padding:16px;
  border-radius:16px;
  margin-bottom:16px;
}

input[type=number]{
  width:100%;
  padding:14px;
  font-size:18px;
  border-radius:10px;
  border:none;
  margin-top:8px;
  text-align:center;
}

button{
  width:100%;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:12px;
  margin-top:10px;
  background:#4CAF50;
  color:white;
}

.result{
  margin-top:16px;
  white-space:pre-line;
  font-weight:bold;
}

.hidden{display:none;}
label{display:block;margin-bottom:10px;}
</style>
</head>

<body>

<header>シール業務ツール</header>

<div class="tabs">
  <div class="tab active" onclick="switchTab(0)">サイズシール</div>
  <div class="tab" onclick="switchTab(1)">44枚シート</div>
</div>

<div class="container">

<!-- サイズシール -->
<div id="app0">

<div class="card">
<input type="number" id="num" placeholder="枚数を入力">
<button onclick="calc()">計算する</button>
<button onclick="resetCalc()">リセット</button>
<div class="result" id="result"></div>
</div>

<div class="card">
<label><input type="checkbox" id="mode80" checked onclick="setMode('80')">80枚で区切る</label>
<label><input type="checkbox" id="mode70" onclick="setMode('70')">70枚で区切る</label>
<label><input type="checkbox" id="modeCustom" onclick="setMode('custom')">カスタム束</label>
<input type="number" id="customSize" placeholder="例:50や100">
</div>

</div>

<!-- 44枚シート -->
<div id="app1" class="hidden">

<div class="card">
<input type="number" id="sheetTotal" placeholder="枚数を入力">
<button onclick="calcSheet()">計算する</button>
<div class="result" id="sheetResult"></div>
</div>

<div class="card">
<label><input type="radio" name="sheetMode" value="100" checked>100枚で区切る</label>
<label><input type="radio" name="sheetMode" value="custom">カスタム束</label>
<input type="number" id="sheetCustom" placeholder="束枚数">
</div>

</div>

</div>

<script>

// タブ切替
function switchTab(index){
  document.querySelectorAll(".tab").forEach((t,i)=>{
    t.classList.toggle("active",i===index);
  });
  document.getElementById("app0").classList.toggle("hidden",index!==0);
  document.getElementById("app1").classList.toggle("hidden",index!==1);
}

//////////////////////////
// サイズシール（完全版）
//////////////////////////

function setMode(mode){
  document.getElementById("mode80").checked = (mode==='80');
  document.getElementById("mode70").checked = (mode==='70');
  document.getElementById("modeCustom").checked = (mode==='custom');
}

function normalDivide(num){
  let result="";
  let blocks=Math.floor(num/42);
  let remainder=num%42;

  if(blocks>0){
    result+="42枚セット × "+blocks+"\n";
  }

  if(remainder>0){
    let rows=Math.floor(remainder/7);
    let used=rows*7;
    let leftover=remainder-used;

    if(rows>0){
      result+=rows+"段（"+used+"枚）";
      if(leftover>0){
        result+=" 余り "+leftover+"枚 (合計"+remainder+"枚)";
      }else{
        result+=" (合計"+remainder+"枚)";
      }
    }else{
      result+="余り "+remainder+"枚";
    }
  }

  return result.trim();
}

function customBundleDivide(total,bundleSize){

  if(total<=bundleSize){
    return normalDivide(total);
  }

  let result="";
  let blocks=Math.floor(total/bundleSize);
  let remainder=total%bundleSize;

  for(let i=0;i<blocks;i++){

    let inside="";
    let remain=bundleSize;

    let sheet42=Math.floor(remain/42);
    remain=remain%42;

    if(sheet42>0){
      inside+="42枚セット × "+sheet42;
    }

    if(remain>0){
      let rows=Math.floor(remain/7);
      let used=rows*7;
      let leftover=remain-used;

      if(rows>0){
        inside+=" + "+rows+"段（"+used+"枚）";
        if(leftover>0){
          inside+=" 余り "+leftover+"枚";
        }
      }else{
        inside+=" + 余り "+remain+"枚";
      }
    }

    result+=inside+" (合計"+bundleSize+"枚)\n";
  }

  if(remainder>0){
    result+=normalDivide(remainder);
  }

  return result.trim();
}

function calc(){

  let total=parseInt(document.getElementById("num").value);

  if(isNaN(total)||total<=0){
    document.getElementById("result").innerText="正しい枚数を入力してください";
    return;
  }

  if(document.getElementById("mode80").checked){
    document.getElementById("result").innerText=
      customBundleDivide(total,80);
    return;
  }

  if(document.getElementById("mode70").checked){
    document.getElementById("result").innerText=
      customBundleDivide(total,70);
    return;
  }

  if(document.getElementById("modeCustom").checked){
    let customSize=parseInt(document.getElementById("customSize").value);
    if(isNaN(customSize)||customSize<=0){
      document.getElementById("result").innerText="カスタム束サイズを入力してください";
      return;
    }
    document.getElementById("result").innerText=
      customBundleDivide(total,customSize);
    return;
  }

  document.getElementById("result").innerText=
    normalDivide(total);
}

function resetCalc(){
  document.getElementById("num").value="";
  document.getElementById("result").innerText="";
}

//////////////////////////
// 44枚シート（完成版）
//////////////////////////

function breakdown(amount){
  const SHEET=44;
  const ROW=4;

  let result="";
  const sheets=Math.floor(amount/SHEET);
  let rem=amount%SHEET;

  if(sheets>0) result+="44枚セット × "+sheets;

  if(rem>0){
    const rows=Math.floor(rem/ROW);
    const last=rem%ROW;

    if(rows>0){
      if(result) result+=" + ";
      result+=rows+"段("+rows*4+"枚)";
    }
    if(last>0){
      if(result) result+=" + ";
      result+="余り"+last+"枚";
    }
  }
  return result;
}

function calcSheet(){

  const total=parseInt(document.getElementById("sheetTotal").value);
  if(!total) return;

  let mode=document.querySelector("input[name='sheetMode']:checked").value;
  let bundle=100;

  if(mode==="custom"){
    bundle=parseInt(document.getElementById("sheetCustom").value);
    if(!bundle) return;
  }

  const sets=Math.floor(total/bundle);
  const remain=total%bundle;

  let text="";

  for(let i=0;i<sets;i++){
    text+=breakdown(bundle)+" (合計"+bundle+"枚)\n\n";
  }

  if(remain>0){
    text+=breakdown(remain)+" (合計"+remain+"枚)";
  }

  document.getElementById("sheetResult").innerText=text;
}

</script>

</body>
</html>
